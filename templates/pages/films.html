{% extends "layout/base.html" %}
{% block content %}

<head>
    <meta charset="UTF-8">
    <title> </title>
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap-theme.min.css" />
    <link rel="stylesheet" href="bower_components/animate.css/animate.min.css" />
    <link rel="stylesheet" href="bower_components/font-awesome/css/font-awesome.min.css" />
    <link rel="stylesheet" href="css/main.css" />
</head>

<div class="container">
	<div class="row">
		<div class="col-12">
                <h3>Begin your movie quest:</h3>
                <div class="input-group">
                    <input type="text" data-bind="value: searchTerm" placeholder="Search for your movie..." width="50%" class="form-control searchForm" aria-label="...">
                    <div class="input-group-btn">
                        <!-- Button and dropdown menu -->

                        <button type="button" data-bind="click: searchForMovies" class="btn btn-primary">Search</button>
                        <button type="button" data-bind="click: clear" class="btn btn-danger">Clear</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="row" data-bind="visible: error">
            <h3 data-bind="text: errorMessage"></h3></div>


        <div class="row results" data-bind="visible: movies().length > 0, foreach: movies">
            <div class="col-12">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h3 class="panel-title" data-bind="text: Title"></h3>
                    </div>
                    <div class="panel-body maxHeight">
                        <div class="center">
                           
                            <ul class="list-group">
                                Type: <span data-bind="text: Type"></span></li>
                                <a data-bind="attr: { href: 'http://www.imdb.com/title/' + imdbID() }">Click here to view IMDB</a></li>
                            </ul>
                            <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-bind="click: $root.viewMoreInfo" data-target="#myModal">View more Info</button>

                        </div>

                    </div>
                </div>

            </div>
        </div>
    </div>
<div class="container content">
		<div class="row">
			<div class="jumbotron">
				<h3 class="text-center">Search For Any Movie</h3>
				<form id="searchForm">
					<div class="col-12">
						<input onkeyup="getanswer(document.getElementById('qurybox').value)" id="qurybox">
						<div id="answer"></div>
						<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
						<script>
							var data;
function getanswer(q){
$.get("https://www.omdbapi.com/?s="+q+"&apikey=be4b405e", function(rawdata){    
 let rawstring =JSON.stringify(rawdata);
 data =JSON.parse(rawstring);
 let title = data.Search[0].Title;
 let year = data.Search[0].Year; 
 let imdburl="https://www.imdb.com/title/"+data.Search[0].imdbID+"/";

 let posterurl =data.Search[0].Poster;
document.getElementById('answer').innerHTML="<h1>"+title+"</h1><br> <img src= '"+posterurl+"'><br><p> Year Released:"+year+"</p> <br> <p> IMDB page: <a href='"+imdburl+"'target='_blank'>"+imdburl+"</a></p>"; }); }
						</script>
					</div>
			</div>
		</div>
	</div>

</body>
    <!-- Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <div class="center">
                        <h4 class="modal-title" id="myModalLabel" data-bind="text: currentMovie.Title"></h4>
                    </div>
                    <div class="modal-body">
                        <div class="center">
                            <img data-bind="attr: { src: currentMovie.Poster}" class="img" alt="Movie Poster image">
                        </div>
                        <li class="list-group-item"><strong class="emp">Type:</strong> <span data-bind="text: currentMovie.Type"></span></li>
                        <li class="list-group-item"><strong class="emp">Year:</strong> <span data-bind="text: currentMovie.Year"></span></li>
                        <li class="list-group-item"><strong class="emp">Genre:</strong> <span data-bind="text: currentMovie.Genre"></span></li>
                        <li class="list-group-item"><strong class="emp">Released:</strong> <span data-bind="text: currentMovie.Released"></span></li>
                        <li class="list-group-item"><strong class="emp">Runtime:</strong> <span data-bind="text: currentMovie.Runtime"></span></li>
                        <li class="list-group-item"><strong class="emp">Rated: </strong><span data-bind="text: currentMovie.Rated"></span></li>
                        <li class="list-group-item"><strong class="emp">IMDB Rating:</strong> <span data-bind="text: currentMovie.imdbRating"></span></li>
                        <li class="list-group-item"><strong class="emp">IMDB Votes:</strong> <span data-bind="text: currentMovie.imdbVotes"></span></li>
                        <li class="list-group-item"><strong class="emp">Language:</strong> <span data-bind="text: currentMovie.Language"></span></li>
                        <li class="list-group-item"><strong class="emp">Country:</strong> <span data-bind="text: currentMovie.Country"></span></li>
                        <li class="list-group-item"><strong class="emp">Writer:</strong> <span data-bind="text: currentMovie.Writer"></span></li>
                        <li class="list-group-item"><strong class="emp">Director:</strong> <span data-bind="text: currentMovie.Director"></span></li>
                        <li class="list-group-item"><strong class="emp">Actors: </strong><span data-bind="text: currentMovie.Actors"></span></li>
                        <li class="list-group-item"><strong class="emp">Plot:</strong> <span data-bind="text: currentMovie.Plot"></span></li>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-bind="click: viewMoreInfo" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>




    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <script src="bower_components/jquery-ui/jquery-ui.min.js"></script>
    <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="bower_components/knockout/dist/knockout.js"></script>
    <script src="bower_components/knockout-mapping/knockout.mapping.js"></script>

    <script src="js/app.js"></script>
    <script src="js/pageFlow.js"></script>
{% endblock %}
